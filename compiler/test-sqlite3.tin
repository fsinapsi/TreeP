;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;                                                                      ;;;;
;;;;                                                                      ;;;;
;;;;                                                                      ;;;;
;;;;                                                                      ;;;;
;;;;                                                                      ;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(defnet test-sqlite3 (func)
        (deflocal i)

        (lmatch remove func "sqlite3-")
        (if (in func [ "exec" "exec-raw" ])
        then    (if (last-pass)
                then    (fprint _dst (if (= func "exec") "  if(trp_sqlite3_exec_data(" "  if(trp_sqlite3_exec_data_raw(")) )
                (expr)
                (virgola)
                (expr)
                (exprseq-ext 1 undef ",NULL," "))")
        else    (for i in (test-sqlite3-table) do
                        until (= <i 0> func) )
                (= <i 0> func)
                (exprseq-ext <i 1> <i 2> (+ "  if(trp_sqlite3_" (dash->underscore func) "(") "))") )
        (flag-true "sqlite3") )

(defun test-sqlite3-table ()
        [ [ "exec-data"         4 undef ]
          [ "exec-data-raw"     4 undef ]
          [ "begin"             1 1 ]
          [ "begin-exclusive"   1 1 ]
          [ "end"               1 1 ]
          [ "rollback"          1 1 ]
        ] )

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;                                                                      ;;;;
;;;;                                                                      ;;;;
;;;;                                                                      ;;;;
;;;;                                                                      ;;;;
;;;;                                                                      ;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

